<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>dropbar.nvim 全配置项说明</title>
  <style>
    :root {
      --bg: #f5f8fc;
      --surface: #ffffff;
      --line: #d7e3f2;
      --text: #1b2533;
      --muted: #5f7088;
      --brand: #0f6ab7;
      --code-bg: #0f1c2e;
      --code-fg: #d9e9ff;
      --shadow: 0 10px 28px rgba(16, 42, 78, 0.08);
    }

    * { box-sizing: border-box; }
    body {
      margin: 0;
      color: var(--text);
      font-family: "IBM Plex Sans", "Noto Sans SC", "Segoe UI", sans-serif;
      line-height: 1.65;
      background: radial-gradient(circle at 100% -5%, #dcedff 0%, var(--bg) 42%, #f9fbff 100%);
    }

    .page {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px 16px 40px;
      display: grid;
      grid-template-columns: 1fr 270px;
      gap: 16px;
    }

    .card {
      background: var(--surface);
      border: 1px solid var(--line);
      border-radius: 14px;
      box-shadow: var(--shadow);
    }

    .hero { padding: 20px; margin-bottom: 12px; }
    .hero h1 { margin: 0 0 8px; font-size: 30px; line-height: 1.2; }
    .meta { color: var(--muted); font-size: 14px; }

    .content { padding: 18px 20px; }
    .content h1, .content h2, .content h3, .content h4 { line-height: 1.3; margin: 1.1em 0 0.5em; }
    .content p { margin: 0.55em 0; }
    .content ul, .content ol { margin: 0.55em 0; padding-left: 1.2em; }
    .content blockquote {
      margin: 0.8em 0;
      padding: 0.55em 0.9em;
      border-left: 4px solid #8bb8e6;
      background: #f3f8ff;
      color: #344a63;
      border-radius: 8px;
    }

    .content code {
      font-family: "JetBrains Mono", "Fira Code", monospace;
      background: #edf3fb;
      border-radius: 6px;
      padding: 0.1em 0.35em;
      font-size: 0.9em;
    }

    .content .codehilite {
      margin: 0.9em 0;
      background: var(--code-bg);
      color: var(--code-fg);
      border: 1px solid #1f3655;
      border-radius: 10px;
      padding: 12px;
      overflow: auto;
    }

    .content .codehilite pre {
      margin: 0;
      background: transparent;
      border: 0;
      padding: 0;
      overflow: visible;
      color: inherit;
      font-size: 13px;
      line-height: 1.55;
    }

    .content .codehilite code {
      background: transparent;
      padding: 0;
      border-radius: 0;
      color: inherit;
      font-size: inherit;
    }

    /* Injected from pygments HtmlFormatter */
    pre { line-height: 125%; }
td.linenos .normal { color: #6e7681; background-color: #0d1117; padding-left: 5px; padding-right: 5px; }
span.linenos { color: #6e7681; background-color: #0d1117; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #e6edf3; background-color: #6e7681; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #e6edf3; background-color: #6e7681; padding-left: 5px; padding-right: 5px; }
.codehilite .hll { background-color: #6e7681 }
.codehilite { background: #0d1117; color: #E6EDF3 }
.codehilite .c { color: #8B949E; font-style: italic } /* Comment */
.codehilite .err { color: #F85149 } /* Error */
.codehilite .esc { color: #E6EDF3 } /* Escape */
.codehilite .g { color: #E6EDF3 } /* Generic */
.codehilite .k { color: #FF7B72 } /* Keyword */
.codehilite .l { color: #A5D6FF } /* Literal */
.codehilite .n { color: #E6EDF3 } /* Name */
.codehilite .o { color: #FF7B72; font-weight: bold } /* Operator */
.codehilite .x { color: #E6EDF3 } /* Other */
.codehilite .p { color: #E6EDF3 } /* Punctuation */
.codehilite .ch { color: #8B949E; font-style: italic } /* Comment.Hashbang */
.codehilite .cm { color: #8B949E; font-style: italic } /* Comment.Multiline */
.codehilite .cp { color: #8B949E; font-weight: bold; font-style: italic } /* Comment.Preproc */
.codehilite .cpf { color: #8B949E; font-style: italic } /* Comment.PreprocFile */
.codehilite .c1 { color: #8B949E; font-style: italic } /* Comment.Single */
.codehilite .cs { color: #8B949E; font-weight: bold; font-style: italic } /* Comment.Special */
.codehilite .gd { color: #FFA198; background-color: #490202 } /* Generic.Deleted */
.codehilite .ge { color: #E6EDF3; font-style: italic } /* Generic.Emph */
.codehilite .ges { color: #E6EDF3; font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.codehilite .gr { color: #FFA198 } /* Generic.Error */
.codehilite .gh { color: #79C0FF; font-weight: bold } /* Generic.Heading */
.codehilite .gi { color: #56D364; background-color: #0F5323 } /* Generic.Inserted */
.codehilite .go { color: #8B949E } /* Generic.Output */
.codehilite .gp { color: #8B949E } /* Generic.Prompt */
.codehilite .gs { color: #E6EDF3; font-weight: bold } /* Generic.Strong */
.codehilite .gu { color: #79C0FF } /* Generic.Subheading */
.codehilite .gt { color: #FF7B72 } /* Generic.Traceback */
.codehilite .g-Underline { color: #E6EDF3; text-decoration: underline } /* Generic.Underline */
.codehilite .kc { color: #79C0FF } /* Keyword.Constant */
.codehilite .kd { color: #FF7B72 } /* Keyword.Declaration */
.codehilite .kn { color: #FF7B72 } /* Keyword.Namespace */
.codehilite .kp { color: #79C0FF } /* Keyword.Pseudo */
.codehilite .kr { color: #FF7B72 } /* Keyword.Reserved */
.codehilite .kt { color: #FF7B72 } /* Keyword.Type */
.codehilite .ld { color: #79C0FF } /* Literal.Date */
.codehilite .m { color: #A5D6FF } /* Literal.Number */
.codehilite .s { color: #A5D6FF } /* Literal.String */
.codehilite .na { color: #E6EDF3 } /* Name.Attribute */
.codehilite .nb { color: #E6EDF3 } /* Name.Builtin */
.codehilite .nc { color: #F0883E; font-weight: bold } /* Name.Class */
.codehilite .no { color: #79C0FF; font-weight: bold } /* Name.Constant */
.codehilite .nd { color: #D2A8FF; font-weight: bold } /* Name.Decorator */
.codehilite .ni { color: #FFA657 } /* Name.Entity */
.codehilite .ne { color: #F0883E; font-weight: bold } /* Name.Exception */
.codehilite .nf { color: #D2A8FF; font-weight: bold } /* Name.Function */
.codehilite .nl { color: #79C0FF; font-weight: bold } /* Name.Label */
.codehilite .nn { color: #FF7B72 } /* Name.Namespace */
.codehilite .nx { color: #E6EDF3 } /* Name.Other */
.codehilite .py { color: #79C0FF } /* Name.Property */
.codehilite .nt { color: #7EE787 } /* Name.Tag */
.codehilite .nv { color: #79C0FF } /* Name.Variable */
.codehilite .ow { color: #FF7B72; font-weight: bold } /* Operator.Word */
.codehilite .pm { color: #E6EDF3 } /* Punctuation.Marker */
.codehilite .w { color: #6E7681 } /* Text.Whitespace */
.codehilite .mb { color: #A5D6FF } /* Literal.Number.Bin */
.codehilite .mf { color: #A5D6FF } /* Literal.Number.Float */
.codehilite .mh { color: #A5D6FF } /* Literal.Number.Hex */
.codehilite .mi { color: #A5D6FF } /* Literal.Number.Integer */
.codehilite .mo { color: #A5D6FF } /* Literal.Number.Oct */
.codehilite .sa { color: #79C0FF } /* Literal.String.Affix */
.codehilite .sb { color: #A5D6FF } /* Literal.String.Backtick */
.codehilite .sc { color: #A5D6FF } /* Literal.String.Char */
.codehilite .dl { color: #79C0FF } /* Literal.String.Delimiter */
.codehilite .sd { color: #A5D6FF } /* Literal.String.Doc */
.codehilite .s2 { color: #A5D6FF } /* Literal.String.Double */
.codehilite .se { color: #79C0FF } /* Literal.String.Escape */
.codehilite .sh { color: #79C0FF } /* Literal.String.Heredoc */
.codehilite .si { color: #A5D6FF } /* Literal.String.Interpol */
.codehilite .sx { color: #A5D6FF } /* Literal.String.Other */
.codehilite .sr { color: #79C0FF } /* Literal.String.Regex */
.codehilite .s1 { color: #A5D6FF } /* Literal.String.Single */
.codehilite .ss { color: #A5D6FF } /* Literal.String.Symbol */
.codehilite .bp { color: #E6EDF3 } /* Name.Builtin.Pseudo */
.codehilite .fm { color: #D2A8FF; font-weight: bold } /* Name.Function.Magic */
.codehilite .vc { color: #79C0FF } /* Name.Variable.Class */
.codehilite .vg { color: #79C0FF } /* Name.Variable.Global */
.codehilite .vi { color: #79C0FF } /* Name.Variable.Instance */
.codehilite .vm { color: #79C0FF } /* Name.Variable.Magic */
.codehilite .il { color: #A5D6FF } /* Literal.Number.Integer.Long */

    .toc {
      position: sticky;
      top: 12px;
      align-self: start;
      padding: 12px;
      max-height: calc(100vh - 24px);
      overflow: auto;
    }

    .toc h2 { margin: 2px 0 8px; font-size: 15px; }
    .toc ul { list-style: none; padding: 0; margin: 0; }
    .toc li { margin: 4px 0; }
    .toc a {
      color: #2f4e73;
      text-decoration: none;
      font-size: 13px;
      display: block;
      padding: 3px 6px;
      border-radius: 6px;
    }
    .toc a:hover { background: #edf5ff; }
    .toc li.lv3 a { padding-left: 18px; font-size: 12px; }
    .toc li.lv4 a { padding-left: 30px; font-size: 12px; }

    .empty-toc {
      color: var(--muted);
      font-size: 12px;
      padding: 6px;
    }

    @media (max-width: 980px) {
      .page { grid-template-columns: 1fr; }
      .toc { position: static; max-height: none; }
    }
  </style>
</head>
<body>
  <div class="page">
    <main>
      <section class="card hero">
        <h1>dropbar.nvim 全配置项说明</h1>
        <div class="meta">Updated at: 2026-02-08 16:13 UTC</div>
      </section>
      <article class="card content">
        <h1 id="dropbarnvim-全配置项说明基于本地源码">dropbar.nvim 全配置项说明（基于本地源码）</h1>
<h2 id="1-文档范围">1. 文档范围</h2>
<p>本文基于你本地插件源码整理：</p>
<ul>
<li><code>~/.local/share/nvim/lazy/dropbar.nvim/lua/dropbar/configs.lua</code></li>
<li><code>~/.local/share/nvim/lazy/dropbar.nvim/README.md</code></li>
</ul>
<p>目标：覆盖 <code>require('dropbar').setup({ ... })</code> 可配置的 <strong>每一个配置项路径</strong>，并说明：</p>
<ul>
<li>含义</li>
<li>可选值</li>
<li>不同选项带来的效果</li>
</ul>
<blockquote>
<p>说明：<code>icons.kinds.symbols</code> 这种“映射表”属于一个配置项，但其内部也给出默认 key 列表供覆写参考。</p>
</blockquote>
<h2 id="2-配置结构总览">2. 配置结构总览</h2>
<div class="codehilite"><pre><span></span><code><span class="nv">opts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nv">icons</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nv">enable</span><span class="p">,</span>
<span class="w">    </span><span class="nv">kinds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">dir_icon</span><span class="p">,</span><span class="w"> </span><span class="nv">file_icon</span><span class="p">,</span><span class="w"> </span><span class="nv">symbols</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nv">ui</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nv">bar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">separator</span><span class="p">,</span><span class="w"> </span><span class="nv">extends</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="nv">menu</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">separator</span><span class="p">,</span><span class="w"> </span><span class="nv">indicator</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nv">symbol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nv">on_click</span><span class="p">,</span>
<span class="w">    </span><span class="nv">preview</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">reorient</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nv">jump</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">reorient</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nv">bar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nv">enable</span><span class="p">,</span>
<span class="w">    </span><span class="nv">attach_events</span><span class="p">,</span>
<span class="w">    </span><span class="nv">update_debounce</span><span class="p">,</span>
<span class="w">    </span><span class="nv">update_events</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">win</span><span class="p">,</span><span class="w"> </span><span class="nv">buf</span><span class="p">,</span><span class="w"> </span><span class="nv">global</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nv">hover</span><span class="p">,</span>
<span class="w">    </span><span class="nv">sources</span><span class="p">,</span>
<span class="w">    </span><span class="nv">padding</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">left</span><span class="p">,</span><span class="w"> </span><span class="nv">right</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nv">pick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">pivots</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nv">truncate</span><span class="p">,</span>
<span class="w">    </span><span class="nv">gc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">interval</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nv">menu</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nv">preview</span><span class="p">,</span>
<span class="w">    </span><span class="nv">hover</span><span class="p">,</span>
<span class="w">    </span><span class="nv">quick_navigation</span><span class="p">,</span>
<span class="w">    </span><span class="nv">entry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">padding</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">left</span><span class="p">,</span><span class="w"> </span><span class="nv">right</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nv">scrollbar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">enable</span><span class="p">,</span><span class="w"> </span><span class="nv">background</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nv">keymaps</span><span class="p">,</span>
<span class="w">    </span><span class="nv">win_configs</span><span class="p">,</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nv">fzf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nv">win_configs</span><span class="p">,</span>
<span class="w">    </span><span class="nv">keymaps</span><span class="p">,</span>
<span class="w">    </span><span class="nv">prompt</span><span class="p">,</span>
<span class="w">    </span><span class="nv">char_pattern</span><span class="p">,</span>
<span class="w">    </span><span class="nv">retain_inner_spaces</span><span class="p">,</span>
<span class="w">    </span><span class="nv">fuzzy_find_on_click</span><span class="p">,</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nv">sources</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nv">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">max_depth</span><span class="p">,</span><span class="w"> </span><span class="nv">relative_to</span><span class="p">,</span><span class="w"> </span><span class="nv">filter</span><span class="p">,</span><span class="w"> </span><span class="nv">modified</span><span class="p">,</span><span class="w"> </span><span class="nv">preview</span><span class="p">,</span><span class="w"> </span><span class="nv">min_widths</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nv">treesitter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">max_depth</span><span class="p">,</span><span class="w"> </span><span class="nv">name_regex</span><span class="p">,</span><span class="w"> </span><span class="nv">valid_types</span><span class="p">,</span><span class="w"> </span><span class="nv">min_widths</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nv">lsp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">max_depth</span><span class="p">,</span><span class="w"> </span><span class="nv">valid_symbols</span><span class="p">,</span><span class="w"> </span><span class="nv">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">ttl_init</span><span class="p">,</span><span class="w"> </span><span class="nv">interval</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nv">min_widths</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nv">markdown</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">max_depth</span><span class="p">,</span><span class="w"> </span><span class="nv">parse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">look_ahead</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nv">min_widths</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nv">terminal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">icon</span><span class="p">,</span><span class="w"> </span><span class="nv">name</span><span class="p">,</span><span class="w"> </span><span class="nv">show_current</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="p">},</span>
<span class="p">}</span>
</code></pre></div>

<h2 id="3-optsicons">3. <code>opts.icons</code></h2>
<h3 id="31-optsiconsenable">3.1 <code>opts.icons.enable</code></h3>
<ul>
<li>类型：<code>boolean</code></li>
<li>默认值：<code>true</code></li>
<li>可选值：</li>
<li><code>true</code>：启用图标体系。</li>
<li><code>false</code>：禁用图标（源码中会把相关 icon 字段清空）。</li>
<li>效果：</li>
<li><code>false</code> 后，面包屑和菜单中的图标会消失，只保留文本。</li>
</ul>
<h3 id="32-optsiconskindsdiricon">3.2 <code>opts.icons.kinds.dir_icon</code></h3>
<ul>
<li>类型：<code>fun(path: string): string, string?</code> 或 <code>string</code>（可设为空字符串）</li>
<li>默认行为：返回 <code>symbols.Folder</code> 和高亮组 <code>DropBarIconKindFolder</code></li>
<li>可选值：</li>
<li>函数：按目录路径动态返回 icon/highlight。</li>
<li>字符串：固定目录图标。</li>
<li><code>""</code>：不显示目录图标。</li>
<li>效果：控制路径源中的目录图标样式与高亮。</li>
</ul>
<h3 id="33-optsiconskindsfileicon">3.3 <code>opts.icons.kinds.file_icon</code></h3>
<ul>
<li>类型：<code>fun(path: string): string, string?</code> 或 <code>string</code></li>
<li>默认行为：</li>
<li>优先尝试 <code>nvim-web-devicons</code> 按文件名/扩展名/filetype 找图标。</li>
<li>找不到时回退 <code>symbols.File</code>。</li>
<li>可选值：</li>
<li>函数：可自定义复杂策略（按路径前缀、后缀、git 状态等）。</li>
<li>字符串：固定文件图标。</li>
<li><code>""</code>：不显示文件图标。</li>
<li>效果：控制文件节点视觉区分度。</li>
</ul>
<h3 id="34-optsiconskindssymbols">3.4 <code>opts.icons.kinds.symbols</code></h3>
<ul>
<li>类型：<code>table&lt;string, string&gt;</code></li>
<li>默认值：内置一组 symbol 类型到图标的映射。</li>
<li>可选值：</li>
<li>任意键值映射，key 为符号类型，value 为要显示的图标文本。</li>
<li>效果：</li>
<li>影响 LSP / Treesitter / Markdown / Terminal 等来源符号的图标展示。</li>
<li>若类型无映射，通常不会显示对应图标。</li>
</ul>
<p>默认内置 key（可逐项覆写）：</p>
<div class="codehilite"><pre><span></span><code>Array, BlockMappingPair, Boolean, BreakStatement, Call, CaseStatement,
Class, Color, Constant, Constructor, ContinueStatement, Copilot,
Declaration, Delete, DoStatement, Element, Enum, EnumMember, Event,
Field, File, Folder, ForStatement, Function, GotoStatement, Identifier,
IfStatement, Interface, Keyword, List, Log, Lsp, Macro, MarkdownH1,
MarkdownH2, MarkdownH3, MarkdownH4, MarkdownH5, MarkdownH6, Method,
Module, Namespace, Null, Number, Object, Operator, Package, Pair,
Property, Reference, Regex, Repeat, Return, Rule, RuleSet, Scope,
Section, Snippet, Specifier, Statement, String, Struct, SwitchStatement,
Table, Terminal, Text, Type, TypeParameter, Unit, Value, Variable,
WhileStatement
</code></pre></div>

<h3 id="35-optsiconsuibarseparator">3.5 <code>opts.icons.ui.bar.separator</code></h3>
<ul>
<li>类型：<code>string</code></li>
<li>默认值：<code>" "</code></li>
<li>可选值：任意字符串。</li>
<li>效果：面包屑组件间分隔符。</li>
</ul>
<h3 id="36-optsiconsuibarextends">3.6 <code>opts.icons.ui.bar.extends</code></h3>
<ul>
<li>类型：<code>string</code></li>
<li>默认值：<code>"…"</code></li>
<li>可选值：任意字符串。</li>
<li>效果：当内容被截断时显示的省略标记。</li>
</ul>
<h3 id="37-optsiconsuimenuseparator">3.7 <code>opts.icons.ui.menu.separator</code></h3>
<ul>
<li>类型：<code>string</code></li>
<li>默认值：<code>" "</code></li>
<li>可选值：任意字符串。</li>
<li>效果：菜单条目组件之间的分隔表现。</li>
</ul>
<h3 id="38-optsiconsuimenuindicator">3.8 <code>opts.icons.ui.menu.indicator</code></h3>
<ul>
<li>类型：<code>string</code></li>
<li>默认值：<code>" "</code></li>
<li>可选值：任意字符串。</li>
<li>效果：菜单中“该项有子节点可展开”的指示图标。</li>
</ul>
<h2 id="4-optssymbol">4. <code>opts.symbol</code></h2>
<h3 id="41-optssymbolonclick">4.1 <code>opts.symbol.on_click</code></h3>
<ul>
<li>类型：<code>fun(symbol, min_width?, n_clicks?, button?, modifiers?)</code> 或 <code>false</code></li>
<li>默认值：内置函数（负责菜单开关、跳转、父子菜单联动）</li>
<li>可选值：</li>
<li>函数：自定义点击行为。</li>
<li><code>false</code>：禁用点击动作。</li>
<li>效果：</li>
<li>决定点击 winbar/menu symbol 后，是展开下拉菜单、跳转定义还是无动作。</li>
</ul>
<h3 id="42-optssymbolpreviewreorient">4.2 <code>opts.symbol.preview.reorient</code></h3>
<ul>
<li>类型：<code>fun(win, range)</code></li>
<li>默认值：空函数</li>
<li>可选值：自定义函数。</li>
<li>效果：预览符号时，控制源窗口重定位策略（例如把预览目标居中）。</li>
</ul>
<h3 id="43-optssymboljumpreorient">4.3 <code>opts.symbol.jump.reorient</code></h3>
<ul>
<li>类型：<code>fun(win, range)</code></li>
<li>默认值：空函数</li>
<li>可选值：自定义函数。</li>
<li>效果：真正跳转到符号位置后，控制窗口重定位（如 <code>zz</code> 类效果）。</li>
</ul>
<h2 id="5-optsbar">5. <code>opts.bar</code></h2>
<h3 id="51-optsbarenable">5.1 <code>opts.bar.enable</code></h3>
<ul>
<li>类型：<code>boolean</code> 或 <code>fun(buf, win, info): boolean</code></li>
<li>默认值：函数（内置一组有效性/性能/可用性判断）</li>
<li>可选值：</li>
<li><code>true</code>：所有窗口尽量开启。</li>
<li><code>false</code>：全局关闭。</li>
<li>函数：按文件类型、窗口类型、文件大小等条件开启。</li>
<li>效果：控制 dropbar 是否附着到某个 window/buffer。</li>
</ul>
<h3 id="52-optsbarattachevents">5.2 <code>opts.bar.attach_events</code></h3>
<ul>
<li>类型：<code>string[]</code></li>
<li>默认值：<code>{ 'TermOpen', 'BufEnter', 'BufWinEnter', 'BufWritePost', 'FileType', 'LspAttach' }</code></li>
<li>可选值：任意 Neovim 自动命令事件列表。</li>
<li>效果：决定何时尝试 attach dropbar。</li>
</ul>
<h3 id="53-optsbarupdatedebounce">5.3 <code>opts.bar.update_debounce</code></h3>
<ul>
<li>类型：<code>number</code>（毫秒）</li>
<li>默认值：<code>32</code></li>
<li>可选值：</li>
<li><code>0</code>：每次更新立即执行，响应快但可能更耗性能。</li>
<li>正数：防抖更新。</li>
<li>效果：平衡滚动/移动时的实时性和性能。</li>
</ul>
<h3 id="54-optsbarupdateeventswin">5.4 <code>opts.bar.update_events.win</code></h3>
<ul>
<li>类型：<code>string[]</code></li>
<li>默认值：<code>{ 'CursorMoved', 'WinResized' }</code></li>
<li>可选值：窗口级相关事件。</li>
<li>效果：触发“单窗口”dropbar 更新。</li>
</ul>
<h3 id="55-optsbarupdateeventsbuf">5.5 <code>opts.bar.update_events.buf</code></h3>
<ul>
<li>类型：<code>string[]</code></li>
<li>默认值：<code>{ 'BufModifiedSet', 'FileChangedShellPost', 'TextChanged', 'ModeChanged' }</code></li>
<li>可选值：buffer 内容/状态变化事件。</li>
<li>效果：触发“该 buffer 关联窗口”更新。</li>
</ul>
<h3 id="56-optsbarupdateeventsglobal">5.6 <code>opts.bar.update_events.global</code></h3>
<ul>
<li>类型：<code>string[]</code></li>
<li>默认值：<code>{ 'DirChanged', 'VimResized' }</code></li>
<li>可选值：全局级事件。</li>
<li>效果：触发全会话范围更新。</li>
</ul>
<h3 id="57-optsbarhover">5.7 <code>opts.bar.hover</code></h3>
<ul>
<li>类型：<code>boolean</code></li>
<li>默认值：<code>true</code></li>
<li>可选值：<code>true | false</code></li>
<li>效果：启用/禁用 winbar 组件 hover 反馈。</li>
</ul>
<h3 id="58-optsbarsources">5.8 <code>opts.bar.sources</code></h3>
<ul>
<li>类型：<code>dropbar_source_t[]</code> 或 <code>fun(buf, win): dropbar_source_t[]</code></li>
<li>默认值：函数</li>
<li>markdown 文件：<code>path + markdown</code></li>
<li>terminal buffer：<code>terminal</code></li>
<li>其他：<code>path + fallback(lsp, treesitter)</code></li>
<li>可选值：</li>
<li>固定 source 列表。</li>
<li>动态函数（按 filetype 返回不同 source 组合）。</li>
<li>效果：决定面包屑数据从哪里来，以及后备策略。</li>
</ul>
<h3 id="59-optsbarpaddingleft">5.9 <code>opts.bar.padding.left</code></h3>
<ul>
<li>类型：<code>number</code></li>
<li>默认值：<code>1</code></li>
<li>可选值：非负整数。</li>
<li>效果：winbar 左侧内边距。</li>
</ul>
<h3 id="510-optsbarpaddingright">5.10 <code>opts.bar.padding.right</code></h3>
<ul>
<li>类型：<code>number</code></li>
<li>默认值：<code>1</code></li>
<li>可选值：非负整数。</li>
<li>效果：winbar 右侧内边距。</li>
</ul>
<h3 id="511-optsbarpickpivots">5.11 <code>opts.bar.pick.pivots</code></h3>
<ul>
<li>类型：<code>string</code></li>
<li>默认值：<code>"abcdefghijklmnopqrstuvwxyz"</code></li>
<li>可选值：任意字符集合。</li>
<li>效果：pick 模式用于组件选择的快捷字符池。</li>
</ul>
<h3 id="512-optsbartruncate">5.12 <code>opts.bar.truncate</code></h3>
<ul>
<li>类型：<code>boolean</code></li>
<li>默认值：<code>true</code></li>
<li>可选值：<code>true | false</code></li>
<li>效果：内容过长时是否自动截断组件。</li>
</ul>
<h3 id="513-optsbargcinterval">5.13 <code>opts.bar.gc.interval</code></h3>
<ul>
<li>类型：<code>number</code>（毫秒）</li>
<li>默认值：<code>60000</code></li>
<li>可选值：正数。</li>
<li>效果：周期性清理失效窗口/buffer 对应的 winbar 绑定。</li>
</ul>
<h2 id="6-optsmenu">6. <code>opts.menu</code></h2>
<h3 id="61-optsmenupreview">6.1 <code>opts.menu.preview</code></h3>
<ul>
<li>类型：<code>boolean</code></li>
<li>默认值：<code>true</code></li>
<li>可选值：<code>true | false</code></li>
<li>效果：在菜单移动时是否预览符号位置。</li>
</ul>
<h3 id="62-optsmenuhover">6.2 <code>opts.menu.hover</code></h3>
<ul>
<li>类型：<code>boolean</code></li>
<li>默认值：<code>true</code></li>
<li>可选值：<code>true | false</code></li>
<li>效果：是否启用菜单 hover 高亮。</li>
</ul>
<h3 id="63-optsmenuquicknavigation">6.3 <code>opts.menu.quick_navigation</code></h3>
<ul>
<li>类型：<code>boolean</code></li>
<li>默认值：<code>true</code></li>
<li>可选值：<code>true | false</code></li>
<li>效果：移动光标时自动贴近可点击组件，提升菜单导航效率。</li>
</ul>
<h3 id="64-optsmenuentrypaddingleft">6.4 <code>opts.menu.entry.padding.left</code></h3>
<ul>
<li>类型：<code>number</code></li>
<li>默认值：<code>1</code></li>
<li>可选值：非负整数。</li>
<li>效果：菜单条目左内边距。</li>
</ul>
<h3 id="65-optsmenuentrypaddingright">6.5 <code>opts.menu.entry.padding.right</code></h3>
<ul>
<li>类型：<code>number</code></li>
<li>默认值：<code>1</code></li>
<li>可选值：非负整数。</li>
<li>效果：菜单条目右内边距。</li>
</ul>
<h3 id="66-optsmenuscrollbarenable">6.6 <code>opts.menu.scrollbar.enable</code></h3>
<ul>
<li>类型：<code>boolean</code></li>
<li>默认值：<code>true</code></li>
<li>可选值：<code>true | false</code></li>
<li>效果：菜单项过多时是否显示滚动条。</li>
</ul>
<h3 id="67-optsmenuscrollbarbackground">6.7 <code>opts.menu.scrollbar.background</code></h3>
<ul>
<li>类型：<code>boolean</code></li>
<li>默认值：<code>true</code></li>
<li>可选值：</li>
<li><code>true</code>：显示滚动条背景（轨道 + thumb）。</li>
<li><code>false</code>：只显示 thumb。</li>
<li>效果：滚动条视觉密度不同。</li>
</ul>
<h3 id="68-optsmenukeymaps">6.8 <code>opts.menu.keymaps</code></h3>
<ul>
<li>类型：<code>table&lt;string, string|function|table&lt;...&gt;&gt;</code></li>
<li>默认值：内置 keymap 表</li>
<li>可选值：</li>
<li>key -&gt; 字符串映射（转发到 Vim 命令）</li>
<li>key -&gt; Lua 函数</li>
<li>复合 table（按插件支持写法扩展）</li>
<li>效果：定义菜单态下按键行为。</li>
</ul>
<p>默认 key：</p>
<ul>
<li><code>q</code> -&gt; <code>&lt;C-w&gt;q</code></li>
<li><code>&lt;Esc&gt;</code> -&gt; <code>&lt;C-w&gt;q</code></li>
<li><code>&lt;LeftMouse&gt;</code> -&gt; 点击菜单项或关闭所有菜单并返回点击窗口</li>
<li><code>&lt;CR&gt;</code> -&gt; 点击当前行第一个可点击组件</li>
<li><code>&lt;MouseMove&gt;</code> -&gt; hover/preview 更新</li>
<li><code>i</code> -&gt; 进入 fzf 模式</li>
</ul>
<h3 id="69-optsmenuwinconfigs">6.9 <code>opts.menu.win_configs</code></h3>
<ul>
<li>类型：<code>table&lt;string, any|fun(menu): any&gt;</code></li>
<li>默认值：一组动态 <code>nvim_open_win</code> 参数</li>
<li>可选值：</li>
<li>每个字段可以给固定值</li>
<li>或给函数动态计算</li>
<li>效果：决定菜单浮窗位置、大小、层级。</li>
</ul>
<p>默认包含字段（都可覆写）：</p>
<ul>
<li><code>style</code>（默认 <code>minimal</code>）</li>
<li><code>row</code></li>
<li><code>col</code></li>
<li><code>relative</code>（默认 <code>win</code>）</li>
<li><code>win</code></li>
<li><code>height</code></li>
<li><code>width</code></li>
<li><code>zindex</code></li>
</ul>
<h2 id="7-optsfzf">7. <code>opts.fzf</code></h2>
<h3 id="71-optsfzfwinconfigs">7.1 <code>opts.fzf.win_configs</code></h3>
<ul>
<li>类型：<code>table&lt;string, any|fun(menu): any&gt;</code></li>
<li>默认值：一组动态浮窗配置</li>
<li>可选值：同 <code>menu.win_configs</code></li>
<li>效果：控制 fzf 输入框位置/尺寸/边框适配。</li>
</ul>
<p>默认包含字段：</p>
<ul>
<li><code>relative</code>（<code>win</code>）</li>
<li><code>anchor</code>（<code>NW</code>）</li>
<li><code>height</code>（<code>1</code>）</li>
<li><code>win</code></li>
<li><code>width</code></li>
<li><code>row</code></li>
<li><code>col</code></li>
</ul>
<h3 id="72-optsfzfkeymaps">7.2 <code>opts.fzf.keymaps</code></h3>
<ul>
<li>类型：<code>table&lt;string, string|function&gt;</code></li>
<li>默认值：内置键位</li>
<li>可选值：自定义按键映射。</li>
<li>效果：定义 fuzzy 模式下鼠标/键盘行为。</li>
</ul>
<p>默认 key：</p>
<ul>
<li><code>&lt;LeftMouse&gt;</code></li>
<li><code>&lt;MouseMove&gt;</code></li>
<li><code>&lt;Up&gt;</code> / <code>&lt;Down&gt;</code></li>
<li><code>&lt;C-k&gt;</code> / <code>&lt;C-j&gt;</code></li>
<li><code>&lt;C-p&gt;</code> / <code>&lt;C-n&gt;</code></li>
<li><code>&lt;CR&gt;</code></li>
<li><code>&lt;S-Enter&gt;</code>（点击最后一个可点击组件）</li>
</ul>
<h3 id="73-optsfzfprompt">7.3 <code>opts.fzf.prompt</code></h3>
<ul>
<li>类型：<code>string</code></li>
<li>默认值：<code>"%#htmlTag# "</code></li>
<li>可选值：任意字符串（可含高亮组前缀）。</li>
<li>效果：fzf 模式提示符样式。</li>
</ul>
<h3 id="74-optsfzfcharpattern">7.4 <code>opts.fzf.char_pattern</code></h3>
<ul>
<li>类型：<code>string</code>（Lua/Vim 模式匹配字符集）</li>
<li>默认值：<code>"[%w%p]"</code></li>
<li>可选值：任意匹配模式。</li>
<li>效果：决定 fuzzy 输入识别哪些字符。</li>
</ul>
<h3 id="75-optsfzfretaininnerspaces">7.5 <code>opts.fzf.retain_inner_spaces</code></h3>
<ul>
<li>类型：<code>boolean</code></li>
<li>默认值：<code>true</code></li>
<li>可选值：<code>true | false</code></li>
<li>效果：是否保留中间空格参与 fuzzy 匹配。</li>
</ul>
<h3 id="76-optsfzffuzzyfindonclick">7.6 <code>opts.fzf.fuzzy_find_on_click</code></h3>
<ul>
<li>类型：<code>boolean</code></li>
<li>默认值：<code>true</code></li>
<li>可选值：<code>true | false</code></li>
<li>效果：点击时是否直接触发 fuzzy 查找流程联动。</li>
</ul>
<h2 id="8-optssources">8. <code>opts.sources</code></h2>
<h3 id="81-optssourcespathmaxdepth">8.1 <code>opts.sources.path.max_depth</code></h3>
<ul>
<li>类型：<code>integer</code></li>
<li>默认值：<code>16</code></li>
<li>可选值：正整数。</li>
<li>效果：路径层级最大深度，防止超深目录导致过长链路。</li>
</ul>
<h3 id="82-optssourcespathrelativeto">8.2 <code>opts.sources.path.relative_to</code></h3>
<ul>
<li>类型：<code>string</code> 或 <code>fun(buf, win): string</code></li>
<li>默认值：函数（优先 <code>getcwd(win)</code>，失败回退全局 cwd）</li>
<li>可选值：</li>
<li>固定基准路径</li>
<li>动态按窗口 cwd 计算</li>
<li>效果：路径 source 的相对基准目录。</li>
</ul>
<h3 id="83-optssourcespathfilter">8.3 <code>opts.sources.path.filter</code></h3>
<ul>
<li>类型：<code>fun(name: string): boolean</code></li>
<li>默认值：始终 <code>true</code></li>
<li>可选值：自定义过滤函数。</li>
<li>效果：可排除目录段/文件段（如 <code>.git</code>、<code>node_modules</code>）。</li>
</ul>
<h3 id="84-optssourcespathmodified">8.4 <code>opts.sources.path.modified</code></h3>
<ul>
<li>类型：<code>fun(sym): sym</code></li>
<li>默认值：原样返回</li>
<li>可选值：自定义函数。</li>
<li>效果：当前 buffer 已修改时，如何调整路径符号表现（例如加 <code>*</code>）。</li>
</ul>
<h3 id="85-optssourcespathpreview">8.5 <code>opts.sources.path.preview</code></h3>
<ul>
<li>类型：<code>boolean</code> 或 <code>fun(path): boolean|nil</code></li>
<li>默认值：<code>true</code></li>
<li>可选值：</li>
<li><code>true</code>：允许预览</li>
<li><code>false</code>：禁用预览</li>
<li>函数：按路径动态决定</li>
<li>效果：控制路径条目 hover/preview 行为。</li>
</ul>
<h3 id="86-optssourcespathminwidths">8.6 <code>opts.sources.path.min_widths</code></h3>
<ul>
<li>类型：<code>integer[]</code></li>
<li>默认值：<code>{}</code></li>
<li>可选值：宽度数组。</li>
<li>效果：控制不同层级的最小显示宽度。</li>
</ul>
<h3 id="87-optssourcestreesittermaxdepth">8.7 <code>opts.sources.treesitter.max_depth</code></h3>
<ul>
<li>类型：<code>integer</code></li>
<li>默认值：<code>16</code></li>
<li>可选值：正整数。</li>
<li>效果：限制 TS 符号向上追溯深度。</li>
</ul>
<h3 id="88-optssourcestreesitternameregex">8.8 <code>opts.sources.treesitter.name_regex</code></h3>
<ul>
<li>类型：<code>string</code>（Vim regex）</li>
<li>默认值：源码内置复杂匹配表达式</li>
<li>可选值：任意 Vim regex。</li>
<li>效果：从节点文本提取可读短名。</li>
</ul>
<h3 id="89-optssourcestreesittervalidtypes">8.9 <code>opts.sources.treesitter.valid_types</code></h3>
<ul>
<li>类型：<code>string[]</code></li>
<li>默认值：内置类型列表</li>
<li>可选值：自定义类型白名单。</li>
<li>效果：只把命中的 TS 类型作为 breadcrumb symbol。</li>
</ul>
<p>默认列表：</p>
<div class="codehilite"><pre><span></span><code>block_mapping_pair, array, boolean, break_statement, call, case_statement,
class, constant, constructor, continue_statement, delete, do_statement,
element, enum, enum_member, event, for_statement, function, goto_statement,
if_statement, interface, keyword, macro, method, namespace, null, number,
operator, package, pair, property, reference, repeat, return_statement,
rule, rule_set, scope, section, specifier, struct, switch_statement, table,
type, type_parameter, unit, value, variable, while_statement, declaration,
field, identifier, object, statement
</code></pre></div>

<h3 id="810-optssourcestreesitterminwidths">8.10 <code>opts.sources.treesitter.min_widths</code></h3>
<ul>
<li>类型：<code>integer[]</code></li>
<li>默认值：<code>{}</code></li>
<li>可选值：宽度数组。</li>
<li>效果：控制 TS source 的层级最小宽度策略。</li>
</ul>
<h3 id="811-optssourceslspmaxdepth">8.11 <code>opts.sources.lsp.max_depth</code></h3>
<ul>
<li>类型：<code>integer</code></li>
<li>默认值：<code>16</code></li>
<li>可选值：正整数。</li>
<li>效果：限制 LSP symbol 栈深。</li>
</ul>
<h3 id="812-optssourceslspvalidsymbols">8.12 <code>opts.sources.lsp.valid_symbols</code></h3>
<ul>
<li>类型：<code>string[]</code></li>
<li>默认值：LSP SymbolKind 白名单</li>
<li>可选值：自定义 SymbolKind 名称列表。</li>
<li>效果：只展示允许的 LSP symbol 类型。</li>
</ul>
<p>默认列表：</p>
<div class="codehilite"><pre><span></span><code>File, Module, Namespace, Package, Class, Method, Property, Field,
Constructor, Enum, Interface, Function, Variable, Constant, String,
Number, Boolean, Array, Object, Keyword, Null, EnumMember, Struct,
Event, Operator, TypeParameter
</code></pre></div>

<h3 id="813-optssourceslsprequestttlinit">8.13 <code>opts.sources.lsp.request.ttl_init</code></h3>
<ul>
<li>类型：<code>number</code></li>
<li>默认值：<code>60</code></li>
<li>可选值：正数。</li>
<li>效果：LSP 请求初始重试次数（超时/失败重试窗口）。</li>
</ul>
<h3 id="814-optssourceslsprequestinterval">8.14 <code>opts.sources.lsp.request.interval</code></h3>
<ul>
<li>类型：<code>number</code>（毫秒）</li>
<li>默认值：<code>1000</code></li>
<li>可选值：正数。</li>
<li>效果：LSP 请求重试间隔。</li>
</ul>
<h3 id="815-optssourceslspminwidths">8.15 <code>opts.sources.lsp.min_widths</code></h3>
<ul>
<li>类型：<code>integer[]</code></li>
<li>默认值：<code>{}</code></li>
<li>可选值：宽度数组。</li>
<li>效果：LSP source 的层级最小宽度策略。</li>
</ul>
<h3 id="816-optssourcesmarkdownmaxdepth">8.16 <code>opts.sources.markdown.max_depth</code></h3>
<ul>
<li>类型：<code>integer</code></li>
<li>默认值：<code>6</code></li>
<li>可选值：正整数。</li>
<li>效果：markdown 标题层级最大深度。</li>
</ul>
<h3 id="817-optssourcesmarkdownparselookahead">8.17 <code>opts.sources.markdown.parse.look_ahead</code></h3>
<ul>
<li>类型：<code>number</code></li>
<li>默认值：<code>200</code></li>
<li>可选值：正数。</li>
<li>效果：光标移动超出已解析范围时，向前重新解析的行数窗口。</li>
</ul>
<h3 id="818-optssourcesmarkdownminwidths">8.18 <code>opts.sources.markdown.min_widths</code></h3>
<ul>
<li>类型：<code>integer[]</code></li>
<li>默认值：<code>{}</code></li>
<li>可选值：宽度数组。</li>
<li>效果：markdown source 的层级最小宽度策略。</li>
</ul>
<h3 id="819-optssourcesterminalicon">8.19 <code>opts.sources.terminal.icon</code></h3>
<ul>
<li>类型：<code>string</code> 或 <code>fun(buf): string?</code></li>
<li>默认值：函数（返回 <code>icons.kinds.symbols.Terminal</code>）</li>
<li>可选值：</li>
<li>固定图标</li>
<li>动态函数</li>
<li><code>nil/""</code>（不显示）</li>
<li>效果：terminal source 图标。</li>
</ul>
<h3 id="820-optssourcesterminalname">8.20 <code>opts.sources.terminal.name</code></h3>
<ul>
<li>类型：<code>string</code> 或 <code>fun(buf): string</code></li>
<li>默认值：<code>vim.api.nvim_buf_get_name</code></li>
<li>可选值：固定名称或函数。</li>
<li>效果：terminal 菜单项显示的名称来源。</li>
</ul>
<h3 id="821-optssourcesterminalshowcurrent">8.21 <code>opts.sources.terminal.show_current</code></h3>
<ul>
<li>类型：<code>boolean</code></li>
<li>默认值：<code>true</code></li>
<li>可选值：<code>true | false</code></li>
<li>效果：是否在 terminal 切换菜单里显示当前 terminal buffer。</li>
</ul>
<h2 id="9-deprecated-配置项本地源码-mset-明确处理">9. Deprecated 配置项（本地源码 <code>M.set()</code> 明确处理）</h2>
<h3 id="91-optsgeneral-已迁移到-optsbar">9.1 <code>opts.general.*</code> 已迁移到 <code>opts.bar.*</code></h3>
<ul>
<li>旧：<code>opts.general</code></li>
<li>新：<code>opts.bar</code></li>
<li>效果：继续用旧字段会提示 deprecated，并尝试自动迁移。</li>
</ul>
<h3 id="92-optsgeneralupdateevents列表写法已废弃">9.2 <code>opts.general.update_events</code>（列表写法）已废弃</h3>
<ul>
<li>旧：<code>opts.general.update_events = { ... }</code></li>
<li>新：</li>
<li><code>opts.bar.update_events.win</code></li>
<li><code>opts.bar.update_events.buf</code></li>
<li><code>opts.bar.update_events.global</code></li>
</ul>
<h3 id="93-optsgeneralupdateinterval-已废弃">9.3 <code>opts.general.update_interval</code> 已废弃</h3>
<ul>
<li>旧：<code>opts.general.update_interval</code></li>
<li>新：<code>opts.bar.update_debounce</code></li>
</ul>
<h3 id="94-optssourcestreesitternamepattern-已废弃">9.4 <code>opts.sources.treesitter.name_pattern</code> 已废弃</h3>
<ul>
<li>旧：<code>name_pattern</code></li>
<li>新：<code>name_regex</code></li>
</ul>
<h3 id="95-optsiconskindsusedevicons-已废弃">9.5 <code>opts.icons.kinds.use_devicons</code> 已废弃</h3>
<ul>
<li>旧：<code>use_devicons</code></li>
<li>新：通过 <code>file_icon</code> / <code>dir_icon</code> 自定义。</li>
</ul>
<h2 id="10-api-兼容性提醒你当前环境">10. API 兼容性提醒（你当前环境）</h2>
<p>你当前版本 <code>dropbar.api</code> 常用 API：</p>
<ul>
<li><code>pick</code></li>
<li><code>goto_context_start</code></li>
<li><code>select_next_context</code></li>
<li><code>fuzzy_find_toggle</code></li>
<li><code>fuzzy_find_prev</code></li>
<li><code>fuzzy_find_next</code></li>
<li><code>fuzzy_find_click</code></li>
</ul>
<p>注意：</p>
<ul>
<li>你本地 <code>dropbar.api</code> <strong>没有</strong> <code>pick_mode()</code> 导出函数。</li>
<li>若你想绑定类似能力，应优先用 <code>pick()</code>，或先判断函数存在性再调用。</li>
</ul>
<h2 id="11-示例稳妥配置模板">11. 示例：稳妥配置模板</h2>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="s2">&quot;Bekaboo/dropbar.nvim&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nv">event</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">&quot;BufReadPost&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;BufWritePost&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;BufNewFile&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="nv">dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">&quot;nvim-tree/nvim-web-devicons&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="nv">opts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nv">bar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nv">enable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="nv">buf</span><span class="p">,</span><span class="w"> </span><span class="nv">win</span><span class="p">,</span><span class="w"> </span><span class="nv">_</span><span class="p">)</span>
<span class="w">        </span><span class="kr">if</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="nv">vim</span><span class="p">.</span><span class="py">api</span><span class="p">.</span><span class="nf">nvim_win_is_valid</span><span class="p">(</span><span class="nv">win</span><span class="p">)</span><span class="w"> </span><span class="kr">then</span>
<span class="w">          </span><span class="kr">return</span><span class="w"> </span><span class="kc">false</span>
<span class="w">        </span><span class="kr">end</span>
<span class="w">        </span><span class="kr">if</span><span class="w"> </span><span class="nv">vim</span><span class="p">.</span><span class="py">bo</span><span class="p">[</span><span class="nv">buf</span><span class="p">].</span><span class="nv">buftype</span><span class="w"> </span><span class="o">~=</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w"> </span><span class="kr">then</span>
<span class="w">          </span><span class="kr">return</span><span class="w"> </span><span class="kc">false</span>
<span class="w">        </span><span class="kr">end</span>
<span class="w">        </span><span class="kd">local</span><span class="w"> </span><span class="nv">ignore_ft</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="s2">&quot;help&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;lazy&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;qf&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;TelescopePrompt&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Trouble&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="s2">&quot;dashboard&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;snacks_dashboard&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;neo-tree&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;noice&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;notify&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="kr">return</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="nv">vim</span><span class="p">.</span><span class="nf">tbl_contains</span><span class="p">(</span><span class="nv">ignore_ft</span><span class="p">,</span><span class="w"> </span><span class="nv">vim</span><span class="p">.</span><span class="py">bo</span><span class="p">[</span><span class="nv">buf</span><span class="p">].</span><span class="nv">filetype</span><span class="p">)</span>
<span class="w">      </span><span class="kr">end</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nv">keys</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="s2">&quot;&lt;leader&gt;;&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="kr">function</span><span class="p">()</span>
<span class="w">        </span><span class="nb">require</span><span class="p">(</span><span class="s2">&quot;dropbar.api&quot;</span><span class="p">).</span><span class="nf">pick</span><span class="p">()</span>
<span class="w">      </span><span class="kr">end</span><span class="p">,</span>
<span class="w">      </span><span class="nv">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Dropbar Pick&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="s2">&quot;[;&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="kr">function</span><span class="p">()</span>
<span class="w">        </span><span class="nb">require</span><span class="p">(</span><span class="s2">&quot;dropbar.api&quot;</span><span class="p">).</span><span class="nf">goto_context_start</span><span class="p">()</span>
<span class="w">      </span><span class="kr">end</span><span class="p">,</span>
<span class="w">      </span><span class="nv">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Dropbar Prev Context&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="s2">&quot;];&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="kr">function</span><span class="p">()</span>
<span class="w">        </span><span class="nb">require</span><span class="p">(</span><span class="s2">&quot;dropbar.api&quot;</span><span class="p">).</span><span class="nf">select_next_context</span><span class="p">()</span>
<span class="w">      </span><span class="kr">end</span><span class="p">,</span>
<span class="w">      </span><span class="nv">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Dropbar Next Context&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">  </span><span class="p">},</span>
<span class="p">}</span>
</code></pre></div>

<h2 id="12-小结">12. 小结</h2>
<p>如果你要“最可控”：优先调这几类项：</p>
<ul>
<li>显示范围：<code>bar.enable</code></li>
<li>性能：<code>bar.update_debounce</code>、<code>bar.update_events.*</code></li>
<li>菜单体验：<code>menu.preview</code>、<code>menu.hover</code>、<code>menu.quick_navigation</code></li>
<li>符号来源：<code>bar.sources</code> + <code>sources.*</code></li>
<li>视觉：<code>icons.*</code> + <code>menu.win_configs</code> / <code>fzf.win_configs</code></li>
</ul>
      </article>
    </main>
    <aside class="card toc" aria-label="Table of contents">
      <h2>Contents</h2>
      <ul>
<li class="lv2"><a href="#1-文档范围">1. 文档范围</a></li>
<li class="lv2"><a href="#2-配置结构总览">2. 配置结构总览</a></li>
<li class="lv2"><a href="#3-optsicons">3. `opts.icons`</a></li>
<li class="lv3"><a href="#31-optsiconsenable">3.1 `opts.icons.enable`</a></li>
<li class="lv3"><a href="#32-optsiconskindsdiricon">3.2 `opts.icons.kinds.dir_icon`</a></li>
<li class="lv3"><a href="#33-optsiconskindsfileicon">3.3 `opts.icons.kinds.file_icon`</a></li>
<li class="lv3"><a href="#34-optsiconskindssymbols">3.4 `opts.icons.kinds.symbols`</a></li>
<li class="lv3"><a href="#35-optsiconsuibarseparator">3.5 `opts.icons.ui.bar.separator`</a></li>
<li class="lv3"><a href="#36-optsiconsuibarextends">3.6 `opts.icons.ui.bar.extends`</a></li>
<li class="lv3"><a href="#37-optsiconsuimenuseparator">3.7 `opts.icons.ui.menu.separator`</a></li>
<li class="lv3"><a href="#38-optsiconsuimenuindicator">3.8 `opts.icons.ui.menu.indicator`</a></li>
<li class="lv2"><a href="#4-optssymbol">4. `opts.symbol`</a></li>
<li class="lv3"><a href="#41-optssymbolonclick">4.1 `opts.symbol.on_click`</a></li>
<li class="lv3"><a href="#42-optssymbolpreviewreorient">4.2 `opts.symbol.preview.reorient`</a></li>
<li class="lv3"><a href="#43-optssymboljumpreorient">4.3 `opts.symbol.jump.reorient`</a></li>
<li class="lv2"><a href="#5-optsbar">5. `opts.bar`</a></li>
<li class="lv3"><a href="#51-optsbarenable">5.1 `opts.bar.enable`</a></li>
<li class="lv3"><a href="#52-optsbarattachevents">5.2 `opts.bar.attach_events`</a></li>
<li class="lv3"><a href="#53-optsbarupdatedebounce">5.3 `opts.bar.update_debounce`</a></li>
<li class="lv3"><a href="#54-optsbarupdateeventswin">5.4 `opts.bar.update_events.win`</a></li>
<li class="lv3"><a href="#55-optsbarupdateeventsbuf">5.5 `opts.bar.update_events.buf`</a></li>
<li class="lv3"><a href="#56-optsbarupdateeventsglobal">5.6 `opts.bar.update_events.global`</a></li>
<li class="lv3"><a href="#57-optsbarhover">5.7 `opts.bar.hover`</a></li>
<li class="lv3"><a href="#58-optsbarsources">5.8 `opts.bar.sources`</a></li>
<li class="lv3"><a href="#59-optsbarpaddingleft">5.9 `opts.bar.padding.left`</a></li>
<li class="lv3"><a href="#510-optsbarpaddingright">5.10 `opts.bar.padding.right`</a></li>
<li class="lv3"><a href="#511-optsbarpickpivots">5.11 `opts.bar.pick.pivots`</a></li>
<li class="lv3"><a href="#512-optsbartruncate">5.12 `opts.bar.truncate`</a></li>
<li class="lv3"><a href="#513-optsbargcinterval">5.13 `opts.bar.gc.interval`</a></li>
<li class="lv2"><a href="#6-optsmenu">6. `opts.menu`</a></li>
<li class="lv3"><a href="#61-optsmenupreview">6.1 `opts.menu.preview`</a></li>
<li class="lv3"><a href="#62-optsmenuhover">6.2 `opts.menu.hover`</a></li>
<li class="lv3"><a href="#63-optsmenuquicknavigation">6.3 `opts.menu.quick_navigation`</a></li>
<li class="lv3"><a href="#64-optsmenuentrypaddingleft">6.4 `opts.menu.entry.padding.left`</a></li>
<li class="lv3"><a href="#65-optsmenuentrypaddingright">6.5 `opts.menu.entry.padding.right`</a></li>
<li class="lv3"><a href="#66-optsmenuscrollbarenable">6.6 `opts.menu.scrollbar.enable`</a></li>
<li class="lv3"><a href="#67-optsmenuscrollbarbackground">6.7 `opts.menu.scrollbar.background`</a></li>
<li class="lv3"><a href="#68-optsmenukeymaps">6.8 `opts.menu.keymaps`</a></li>
<li class="lv3"><a href="#69-optsmenuwinconfigs">6.9 `opts.menu.win_configs`</a></li>
<li class="lv2"><a href="#7-optsfzf">7. `opts.fzf`</a></li>
<li class="lv3"><a href="#71-optsfzfwinconfigs">7.1 `opts.fzf.win_configs`</a></li>
<li class="lv3"><a href="#72-optsfzfkeymaps">7.2 `opts.fzf.keymaps`</a></li>
<li class="lv3"><a href="#73-optsfzfprompt">7.3 `opts.fzf.prompt`</a></li>
<li class="lv3"><a href="#74-optsfzfcharpattern">7.4 `opts.fzf.char_pattern`</a></li>
<li class="lv3"><a href="#75-optsfzfretaininnerspaces">7.5 `opts.fzf.retain_inner_spaces`</a></li>
<li class="lv3"><a href="#76-optsfzffuzzyfindonclick">7.6 `opts.fzf.fuzzy_find_on_click`</a></li>
<li class="lv2"><a href="#8-optssources">8. `opts.sources`</a></li>
<li class="lv3"><a href="#81-optssourcespathmaxdepth">8.1 `opts.sources.path.max_depth`</a></li>
<li class="lv3"><a href="#82-optssourcespathrelativeto">8.2 `opts.sources.path.relative_to`</a></li>
<li class="lv3"><a href="#83-optssourcespathfilter">8.3 `opts.sources.path.filter`</a></li>
<li class="lv3"><a href="#84-optssourcespathmodified">8.4 `opts.sources.path.modified`</a></li>
<li class="lv3"><a href="#85-optssourcespathpreview">8.5 `opts.sources.path.preview`</a></li>
<li class="lv3"><a href="#86-optssourcespathminwidths">8.6 `opts.sources.path.min_widths`</a></li>
<li class="lv3"><a href="#87-optssourcestreesittermaxdepth">8.7 `opts.sources.treesitter.max_depth`</a></li>
<li class="lv3"><a href="#88-optssourcestreesitternameregex">8.8 `opts.sources.treesitter.name_regex`</a></li>
<li class="lv3"><a href="#89-optssourcestreesittervalidtypes">8.9 `opts.sources.treesitter.valid_types`</a></li>
<li class="lv3"><a href="#810-optssourcestreesitterminwidths">8.10 `opts.sources.treesitter.min_widths`</a></li>
<li class="lv3"><a href="#811-optssourceslspmaxdepth">8.11 `opts.sources.lsp.max_depth`</a></li>
<li class="lv3"><a href="#812-optssourceslspvalidsymbols">8.12 `opts.sources.lsp.valid_symbols`</a></li>
<li class="lv3"><a href="#813-optssourceslsprequestttlinit">8.13 `opts.sources.lsp.request.ttl_init`</a></li>
<li class="lv3"><a href="#814-optssourceslsprequestinterval">8.14 `opts.sources.lsp.request.interval`</a></li>
<li class="lv3"><a href="#815-optssourceslspminwidths">8.15 `opts.sources.lsp.min_widths`</a></li>
<li class="lv3"><a href="#816-optssourcesmarkdownmaxdepth">8.16 `opts.sources.markdown.max_depth`</a></li>
<li class="lv3"><a href="#817-optssourcesmarkdownparselookahead">8.17 `opts.sources.markdown.parse.look_ahead`</a></li>
<li class="lv3"><a href="#818-optssourcesmarkdownminwidths">8.18 `opts.sources.markdown.min_widths`</a></li>
<li class="lv3"><a href="#819-optssourcesterminalicon">8.19 `opts.sources.terminal.icon`</a></li>
<li class="lv3"><a href="#820-optssourcesterminalname">8.20 `opts.sources.terminal.name`</a></li>
<li class="lv3"><a href="#821-optssourcesterminalshowcurrent">8.21 `opts.sources.terminal.show_current`</a></li>
<li class="lv2"><a href="#9-deprecated-配置项本地源码-mset-明确处理">9. Deprecated 配置项（本地源码 `M.set()` 明确处理）</a></li>
<li class="lv3"><a href="#91-optsgeneral-已迁移到-optsbar">9.1 `opts.general.*` 已迁移到 `opts.bar.*`</a></li>
<li class="lv3"><a href="#92-optsgeneralupdateevents列表写法已废弃">9.2 `opts.general.update_events`（列表写法）已废弃</a></li>
<li class="lv3"><a href="#93-optsgeneralupdateinterval-已废弃">9.3 `opts.general.update_interval` 已废弃</a></li>
<li class="lv3"><a href="#94-optssourcestreesitternamepattern-已废弃">9.4 `opts.sources.treesitter.name_pattern` 已废弃</a></li>
<li class="lv3"><a href="#95-optsiconskindsusedevicons-已废弃">9.5 `opts.icons.kinds.use_devicons` 已废弃</a></li>
<li class="lv2"><a href="#10-api-兼容性提醒你当前环境">10. API 兼容性提醒（你当前环境）</a></li>
<li class="lv2"><a href="#11-示例稳妥配置模板">11. 示例：稳妥配置模板</a></li>
<li class="lv2"><a href="#12-小结">12. 小结</a></li>
</ul>
    </aside>
  </div>
</body>
</html>
